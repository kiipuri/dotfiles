set ratios 1:2:3
set cleaner ~/.config/lf/cleaner
set previewer ~/.config/lf/preview
set hidden true
set drawbox true
set icons true
set ignorecase true
set shell sh
set ifs "\n"

cmd trash %trash-put $fx

cmd open ${{
    test -L $f && f=$(readlink -f $f)
    case $(file --mime-type $f -b) in
        text/*|application/json) $EDITOR $fx;;
        *) for f in $fx; do setsid $OPENER $f > /dev/null 2> /dev/null & done;;
    esac
}}

cmd unarchive ${{
  case "$f" in
      *.zip) unzip "$f" ;;
      *.tar.gz) tar -xzf "$f" ;;
      *.tar.bz2) tar -xjf "$f" ;;
      *.tar.xz) tar -xf "$f" ;;
      *.tar) tar -xvf "$f" ;;
      *.rar) unrar e "$f" ;;
      *) echo "Unsupported format" ;;
  esac
}}

cmd mkdir ${{
  printf "Directory Name: "
  read ans
  mkdir $ans
}}

cmd mkfile ${{
  printf "File Name: "
  read ans
  $EDITOR $ans
}}

cmd zip ${{
    zip -r "$f".zip "$f"
}}

cmd z %{{
    printf "Directory search string: "
    read dir
    #result="$(zoxide query --exclude "${PWD}" -- "$1")"
    result="$(zoxide query $dir)"
    lf -remote "send ${id} cd '${result}'"
}}

cmd zi ${{
    result="$(zoxide query -i -- "$1")"
    lf -remote "send ${id} cd '${result}'"
}}

map m
map au unarchive
map x trash
map <enter> shell
map mf mkfile
map md mkdir
map az zip
map zz z
map zi zi
